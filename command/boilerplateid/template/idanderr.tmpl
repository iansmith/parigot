package {{.pkg}}

//
// DO NOT EDIT.  This file was machine genarted by boilerplateid for {{.primaryName}}Id and {{.errorName}}Id
//

import (
{{if .idNoImport }}
{{else}}	
    "github.com/iansmith/parigot/apishared/id"
{{end}}
	"github.com/tetratelabs/wazero/api"
    protosupportmsg "github.com/iansmith/parigot/g/msg/protosupport/v1"
)
//
//  Begin Boilerplate for {{.primaryName}} and {{.errorName}}
//

type {{.errorName}}IdCode uint16
const {{.errorName}}IdNoError {{.errorName}}IdCode = 0
const {{.errorName}}IdLocateError {{.errorName}}IdCode = 1
const {{.errorName}}IdUnmarshalError {{.errorName}}IdCode = 2
const {{.errorName}}IdDispatchError {{.errorName}}IdCode = 3
const {{.errorName}}IdGuestStart {{.errorName}}IdCode = 4
type Def{{.primaryName}} struct{}

func (f Def{{.primaryName}}) ShortString() string { return "{{.primaryShortName}}" }
func (f Def{{.primaryName}}) Letter() byte        { return {{.primaryLetter}} } 
func (f Def{{.primaryName}}) IsError() bool       { return false }

type {{.primaryName}}Id id.IdRoot[Def{{.primaryName}}]

type Def{{.errorName}} struct{}

func (f Def{{.errorName}}) ShortString() string { return "{{.errorShortName}}" }
func (f Def{{.errorName}}) Letter() byte        { return {{.errorLetter}} } 
func (f Def{{.errorName}}) IsError() bool       { return true }

type {{.errorName}}Id id.IdRoot[Def{{.errorName}}]

// {{.errorName}}IdNoErr is a convenience for referring to an errorId that is
// "everything is ok".
var {{.errorName}}IdNoErr = New{{.errorName}}Id({{.errorName}}IdNoError)

func New{{.errorName}}Id(code {{.errorName}}IdCode) {{.errorName}}Id {
    high2:=uint64(Def{{.errorName}}{}.Letter())
    high2 <<= 8
    high2 |= 0x80
    high:=high2<<48
    low4:=uint16(code)
    low:=uint64(low4)
    root:={{.idPkg}}NewIdRootFromRaw[Def{{.errorName}}]({{.idPkg}}NewRawId(high,low))
    return {{.errorName}}Id(root)
}

func New{{.errorName}}IdFromRaw(in {{.idPkg}}IdRaw) {{.errorName}}Id {
	return {{.errorName}}Id({{.idPkg}}NewIdRootFromRaw[Def{{.errorName}}](in))
}
func New{{.primaryName}}IdFromProto(in *protosupportmsg.IdRaw) {{.primaryName}}Id {
	raw:=MustUnmarshal{{.primaryName}}Id(in)
	return {{.primaryName}}Id(raw)
}

func (f {{.primaryName}}Id) Marshal() *protosupportmsg.IdRaw {
	return {{.idPkg}}MarshalProtobuf({{.primaryCast}})
}
func (f {{.errorName}}Id) Marshal() *protosupportmsg.IdRaw {
	return {{.idPkg}}MarshalProtobuf({{.errorCast}})
}
func ZeroValue{{.primaryName}}Id() {{.primaryName}}Id {
	return {{.primaryName}}Id({{.idPkg}}ZeroValue[Def{{.primaryName}}]())
}
func ZeroValue{{.errorName}}Id() {{.errorName}}Id {
	return {{.errorName}}Id({{.idPkg}}ZeroValue[Def{{.errorName}}]())
}
func (f {{.errorName}}Id) Raw() {{.idPkg}}IdRaw {
	return {{.errorCast}}.Raw()
}
func (f {{.primaryName}}Id) Raw() {{.idPkg}}IdRaw {
	return {{.primaryCast}}.Raw()
}
func (f {{.errorName}}Id) Equal(other {{.errorName}}Id) bool{
	return {{.errorCast}}.Equal({{.idPkg}}IdRoot[Def{{.errorName}}](other))
}

func (f {{.primaryName}}Id) Equal(other {{.primaryName}}Id) bool{
	return {{.primaryCast}}.Equal({{.idPkg}}IdRoot[Def{{.primaryName}}](other))
}

func (f {{.primaryName}}Id) String() string{
	return {{.errorCast}}.String()
}
func (f {{.primaryName}}Id) Short() string{
	return {{.primaryCast}}.Short()
}
func (f {{.primaryName}}Id) High() uint64{
	return {{.primaryCast}}.High()
}
func (f {{.primaryName}}Id) Low() uint64{
	return {{.primaryCast}}.Low()
}

func (f {{.errorName}}Id) String() string{
	return {{.primaryCast}}.String()
}
func (f {{.errorName}}Id) Short() string{
	return {{.errorCast}}.Short()
}
func (f {{.primaryName}}Id) IsError() bool{
	return {{.errorCast}}.IsError()
}
func (f {{.errorName}}Id) IsError() bool{
	return {{.primaryCast}}.IsError()
}
func (f {{.errorName}}Id) IsZeroValue() bool{
	return {{.errorCast}}.IsZeroValue()
}
func (f {{.primaryName}}Id) IsZeroValue() bool{
	return {{.primaryCast}}.IsZeroValue()
}
func (f {{.primaryName}}Id) IsEmptyValue() bool{
	return {{.primaryCast}}.IsEmptyValue()
}

func (f {{.errorName}}Id) ErrorCode() {{.errorName}}IdCode{
	return {{.errorName}}IdCode({{.idPkg}}IdRoot[Def{{.errorName}}](f).ErrorCode())
}

func Unmarshal{{.primaryName}}Id(b *protosupportmsg.IdRaw) ({{.primaryName}}Id, {{.idPkg}}IdErr) {
	fid, err := {{.idPkg}}UnmarshalProtobuf[Def{{.primaryName}}](b)
	if err.IsError() {
		return ZeroValue{{.primaryName}}Id(), err
	}
	return {{.primaryName}}Id(fid), {{.idPkg}}NoIdErr
}
func MustUnmarshal{{.primaryName}}Id(b *protosupportmsg.IdRaw) {{.primaryName}}Id{
	result, err:=Unmarshal{{.primaryName}}Id(b)
	if err.IsError() {
		panic("unable to unmarshal {{.primaryName}}Id from raw value: "+err.String())
	}
	return result
}

func Unmarshal{{.primaryName}}IdErr(b *protosupportmsg.IdRaw) ({{.errorName}}Id, {{.idPkg}}IdErr) {
	fid, err := {{.idPkg}}UnmarshalProtobuf[Def{{.errorName}}](b)
	if err != {{.idPkg}}NoIdErr {
		return ZeroValue{{.errorName}}Id(), err
	}
	return {{.errorName}}Id(fid), {{.idPkg}}NoIdErr
}

func New{{.primaryName}}Id() {{.primaryName}}Id {
	idroot := {{.idPkg}}NewIdRoot[Def{{.primaryName}}]()
	return {{.primaryName}}Id(idroot)
}
func (f {{.errorName}}Id) WriteGuestLe(mem api.Memory, offset uint32) bool {
    return {{.errorCast}}.WriteGuestLe(mem,offset)
}
func (f {{.errorName}}Id) MustWriteGuestLe(mem api.Memory, offset uint32) {
    if !{{.errorCast}}.WriteGuestLe(mem,offset){
        panic("cannot write error code to guest memory, giving up")
    }
}

//
// End Boilerplate for {{.primaryName}} and {{.errorName}}
//
