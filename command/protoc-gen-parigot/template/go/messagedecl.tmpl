package {{ LastSegmentOfPackage .file.GetPackage }}

import(
	"google.golang.org/protobuf/proto"
)

// We re-use the code generated by the protoc-gen-go plugin for all the message
// types we find in the protos.
{{ range .info.Message }}
{{- if .NotGoogleMessage }}
{{ if .IsInputSource }}
func Encode{{.GetWasmMessageName}}(message *{{.GetWasmMessageName}}) ([]byte,error) {
	return proto.Marshal(message)
}
{{- end}}{{/* is an input source */}}
{{- end}}{{/* not a google type */}}
{{- end}}{{/* range over messages */}}

{{ range .info.Message }}
{{- if .NotGoogleMessage }}
{{ if .IsOutputTarget }}
func Decode{{.GetWasmMessageName}}(b []byte) (*{{.GetWasmMessageName}},error) {
    result:=&{{.GetWasmMessageName}}{}
	err:=proto.Unmarshal(b,result)
	if err!=nil {
	    return nil,err
	}
	return result,nil
}
{{- end}}{{/* is an output target */}}
{{- end}}{{/* not a google type */}}
{{- end}}{{/* range over messages */}}
